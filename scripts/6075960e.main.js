(function(){window.TestModel=function(){function a(a){this.object=a}return a}()}).call(this),function(){window.TestsController=function(){function a(a){null==a&&(a=[]),this.settings=$.extend({},b,a),this.parseJSON()}var b,c,d;return b={file_name:"scripts/tests.json"},c=!1,d=[],a.prototype.parseJSON=function(){return $.ajax({url:this.settings.file_name,success:function(a){var b,e,f,g,h;if(a.tests)for(h=a.tests,b=f=0,g=h.length;g>f;b=++f)e=h[b],d[b]=new TestModel(e);return c=!0}})},a.prototype.onLoad=function(a){var b;return(b=function(){return c?a():setTimeout(function(){return b()},10)})()},a.prototype.getTestList=function(){return d},a}()}.call(this),function(){var a;window.TestsView=function(){function a(){p=new TestsController,u(),this.onLoad(function(){return x(function(){return F(),s(),l()})})}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F;return p=void 0,v=!1,e=$(".test-container"),f=$(".test-progress"),d=$(".test-header"),g=$(".test-result"),E="background-numbers",D="question",c=$(".test-buttons"),b=$(".test-button-container"),A=void 0,h=void 0,i=void 0,C=void 0,B=void 0,w=[{progress:"",head:"Тесты",text:"Задача оргинизации, в особенности же начало повседневной работы по формированию позиции влечет за собой процесс внедрения и модернизации позиций, занимаемых участниками в отношении поставленных задач. Не следует, однако, забывать, что постоянное информационно-пропагандисткое обеспечение нашей деятельности обеспечивает широкому кругу (специалистов) участие в формировании систем малого учатия."}],a.prototype.onLoad=function(a){var b;return(b=function(){return v?a():setTimeout(function(){return b()},10)})()},x=function(a){return e.addClass("hidden"),setTimeout(function(){return a(),e.removeClass("hidden")},500)},F=function(a){var b;return a?g.removeClass(E):g.addClass(E),b=$.extend({},w,a),b=b[0],f.text(b.progress),d.text(b.head),g.text(b.text)},l=function(){return e.on("click",".test-button-container",function(a){var b,c,d,e,f;return b=$(this).data("action"),a.stopPropagation(),"start_test"===b&&(d=$(this).data("id"),c=A[d].object.hidden_code,e=m(c),f=$(this).data("repeat"),e&&!f?(h=A[d].object,i=d,B=e,t()):(o(c),z(d))),"contact_page"===b&&$("#contacts_nav").click(),"answer"===b&&k($(this).data("question_value")),"start_page"===b?x(function(){return F(),s()}):void 0})},z=function(a){var b;return i=a,h=A[a].object,C=-1,B=0,b=[{progress:"0/"+h.questions.length,head:h.name,text:h.intro}],x(function(){return F(b),n(),j("Начать тест",{action:"answer",question_value:0}),j("Вернуться",{action:"start_page"})})},k=function(a){return B+=a,C++,C<h.questions.length?q(C):t()},q=function(a){var b,c;return c=h.questions[a],b=[{progress:a+1+"/"+h.questions.length,head:h.name,text:c.text}],x(function(){var a,d,e,f,h;for(g.addClass(D),F(b),n(),f=c.answers,h=[],d=0,e=f.length;e>d;d++)a=f[d],h.push(j(a.text,{action:"answer",question_value:a.score}));return h})},t=function(){var a,b,c,d,e,f,k,l,m;for(d="",m=h.results,k=0,l=m.length;l>k;k++)e=m[k],f=parseInt(B),b=parseInt(e.score_min),a=parseInt(e.score_max),a>=f&&f>=b&&(d=e.text);return d?(y(h.hidden_code,B),c=[{progress:"Результаты теста",head:h.name,text:d}],x(function(){return g.removeClass(D),F(c),n(),j("Записаться на консультацию",{action:"contact_page"}),j("Пройти тест заново",{action:"start_test",id:i,repeat:!0}),j("Вернуться к списку тестов",{action:"start_page"})})):(g.removeClass(D),x(function(){return F(),s()}))},u=function(){return p.onLoad(function(){return A=p.getTestList(),v=!0})},s=function(){var a,b,c,d,e;for(n(),e=[],a=c=0,d=A.length;d>c;a=++c)b=A[a],e.push(j(b.object.name,{action:"start_test",id:a}));return e},y=function(a,b){return localStorage.setItem(a,b)},m=function(a){return localStorage[a]?localStorage[a]:!1},o=function(a){return localStorage.removeItem(a)},j=function(a,b){var c,d,e,f;d="";for(e in b)f=b[e],d+="data-"+e+'="'+f+'"';return c='<div class="test-button-container" '+d+">",c+='<button class="test-button">'+a+"</button>",c+="</div>",r(c)},r=function(a){return c.append(a)},n=function(){return c.empty()},a}(),a=new TestsView}.call(this),function(){!function(a){return a.fn.swipe=function(b){var c,d;return d=this,c={touchMinTime:50,threshold:{x:20,y:10},preventDefaultEvents:!0,swipeLeft:function(a,b){return console.log("swiped left, speed: "+b)},swipeRight:function(a,b){return console.log("swiped right, speed:"+b)},swipeMove:function(a){return console.log("swipe last move delta:"+a)},swipeCancel:function(){return console.log("swipe was canceled")}},d.settings=a.extend({},c,b),this?this.each(function(){var b,e,f,g,h,i,j,k,l,m,n,o;return h=a(this),o=!1,i=void 0,j={x:0,y:0,timestamp:0},e={x:0,y:0,timestamp:0},g={x:0,y:0,timestamp:0},b={x:0,y:0,time:0},n=function(a){return j=f(a),i=0,e={x:j.x,y:j.y,timestamp:j.timestamp},g={x:j.x,y:j.y,timestamp:j.timestamp},o=!0},m=function(a){return o?(i++,c.preventDefaultEvents&&a.preventDefault(),e=f(a),b.x=e.x-g.x,b.y=e.y-g.y,b.time=e.timestamp-g.timestamp,g.x=e.x,g.y=e.y,g.timestamp=e.timestamp,d.settings.swipeMove(b.x)):!1},l=function(){var a,c,f;return o=!1,i?(i=0,a=e.timestamp-j.timestamp,!a||a<d.settings.touchMinTime?(d.settings.swipeCancel(),!1):(f=b.x/b.time,c=j.x-e.x,c>0?(d.settings.swipeLeft(Math.abs(c),Math.abs(f)),!0):0>=c?(d.settings.swipeRight(Math.abs(c),Math.abs(f)),!0):d.settings.swipeCancel())):!1},k=function(){return o?(o=!1,d.settings.swipeCancel()):!1},f=function(a){var b;return b={},a.targetTouches&&(b.x=a.targetTouches[0].pageX),b.x=b.x||a.x,b.x=b.x||a.clientX,a.targetTouches&&(b.y=a.targetTouches[0].pageY),b.y=b.y||a.y,b.y=b.y||a.clientY,b.timestamp=a.timeStamp||Date.now(),b},this.addEventListener("touchstart",n,!1),this.addEventListener("touchmove",m,!1),this.addEventListener("touchend",l,!1),this.addEventListener("touchcancel",k,!1)}):!1}}(jQuery)}.call(this),function(){!function(a){return a.fn.horizontalParallax=function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P;return s={containerBgCss:{dark:"dark-container",light:"light-container"},itemClass:"parallax-item",arrowClass:"parallax-arrow",navItemClass:"parallax-nav-item",navBorderClass:"parallax-nav-border",headsCssClass:"parallax-heads",activeItemClass:"active",leftArrowClass:"left",rightArrowClass:"right",toRightCssClass:"to-right",toLeftCssClass:"to-left",animationTime:500},C=this,d=a(this),c=a("body, html"),e=void 0,A=[],B=[],f=void 0,i={left:"",right:""},o="",q=-1,M=0,p=-1,t=!1,z=function(){return C.settings=a.extend({},s,b),e=d.find("."+C.settings.headsCssClass),c.css({overflow:"hidden"}),q=0,j(),a(window).on("resize",function(){return j()}),setTimeout(function(){return a(document).scrollLeft()>0?(q=1,G(0)):void 0},500),N(),F()},j=function(){return x(),L(),D(q,!1),P(q)},x=function(){return u(),v(),w(),f=d.find("."+C.settings.navBorderClass)},v=function(){var b;return A=[],b=0,d.find("."+C.settings.itemClass).each(function(c,d){var e;return e=parseInt(a(d).data("parallax")),A[a(d).data("index")]={object:a(d),left:b,parallax:1===e,background:a(d).data("background")},I(a(d)),H(a(d),b),b+=a(d).width()}),M=A.length},w=function(){var b;return B=[],b=d.find("."+C.settings.navItemClass),b.each(function(b,c){var d;return d=a(c).position().left+a(c).width(),B[a(c).data("index")]={object:a(c),right:d}})},I=function(b){return b.width(a(window).width())},H=function(a,b){return a.css({position:"absolute",left:b})},F=function(){var b,c,d,e,f,g;for(c in A)f=A[c],f.object.find(".parallax-text").on("mousedown",function(a){return a.stopPropagation()});for(c in B)f=B[c],f.object.on("click",function(b){return G(a(this).data("index")),b.stopPropagation()});i.left.on("click",function(a){return G(q-1),a.stopPropagation()}),i.right.on("click",function(a){return G(q+1),a.stopPropagation()}),g=function(b,c,d){var e;return m(b)?(e=2*Math.max(d,1),G(e*c<a(window).width()?q:b)):K()};for(c in A)f=A[c],f.object.swipe({swipeMove:function(a){return E(-a)},swipeLeft:function(a,b){var c;return c=q+1,g(c,a,b)},swipeRight:function(a,b){var c;return c=q-1,g(c,a,b)},swipeCancel:function(){return G(q)}});b=function(b,c){var d,e;return c?(b.preventDefault(),d=q+c,m(d)?G(d):(e=c*a(window).width()/5,E(e,!0))):!1},e=r(function(a){var c,d,e;return a=window.e||a,console.log(a),c=void 0,a.originalEvent&&(c=a.originalEvent.deltaX+a.originalEvent.deltaY,c=-c),c=c||a.wheelDelta||-a.detail||-a.originalEvent.detail,c=Math.max(-1,Math.min(1,c)),e=void 0,0>c&&(d=1),c>0&&(d=-1),b(a,d)},100,!0);for(c in A)f=A[c],f.object.on("mousewheel DOMMouseScroll",e);return d=r(function(a){var c;return(37===a.which||37===a.keyCode)&&(c=-1),(39===a.which||39===a.keyCode)&&(c=1),b(a,c)}),a(document).on("keydown",d)},E=function(b,c){return null==c&&(c=!1),a(document).scrollLeft(a(document).scrollLeft()+b),c?K():void 0},G=function(a){return n(a)?(t=!0,a!==q&&(N(),P(a)),D(a)):!1},D=function(a,b){var d,f,i,j;return null==b&&(b=!0),j=A[a].left,d=a-q,i=p,p=f,f=A[a].object.data("headstage"),(void 0===f||f===!1)&&(f=-1),-1===f&&f!==i&&d>0?(e.attr("data-headstage","to-left"),setTimeout(function(){return e.attr("data-headstage",f)},1*C.settings.animationTime)):e.attr("data-headstage",f),g(a),b?(a!==q&&h(a,d),c.animate({scrollLeft:j},C.settings.animationTime,function(){return q=a,t=!1})):(c.scrollLeft(j),q=a)},h=function(a,b){var c,d;return c=A[a].object.find(".parallax-text"),d=b>0?C.settings.toRightCssClass:C.settings.toLeftCssClass,c.addClass(d),setTimeout(function(){return c.removeClass(d)},3*C.settings.animationTime)},P=function(a){var b,c,d;if(B[a]&&B[a].right&&f.css({width:B[a].right}),B[a]&&B[a].right)c=a;else{c=0;for(b in B)d=B[b],a>b&&(c=b)}return f.css({width:B[c].right})},u=function(){var a;return a="."+C.settings.arrowClass,a+="."+C.settings.leftArrowClass,i.left=d.find(a),a="."+C.settings.arrowClass,a+="."+C.settings.rightArrowClass,i.right=d.find(a)},O=void 0,N=function(){return y(),clearTimeout(O),O=setTimeout(function(){return L()},2*C.settings.animationTime)},y=function(){return i.left.addClass("hidden"),i.right.addClass("hidden")},L=function(){return k()&&i.left.removeClass("hidden"),l()?i.right.removeClass("hidden"):void 0},m=function(a){var b;return b=A[q],b=b&&A[q].parallax,b=b&&A[a],b=b&&A[a].parallax,b===!0},n=function(a){return t?!1:M>a&&a>=0},k=function(){return q-1>=0},l=function(){return M>q+1},K=function(){var b,c,d,e;b=0,c=a(document).scrollLeft()+a(window).width()/2;for(d in A)e=A[d],c>e.left&&(b=parseInt(d));return q=b,g(b)},J=function(a){var b,c;return b=A[a].background,c=o,b!==c?(d.removeClass(C.settings.containerBgCss[c]),d.addClass(C.settings.containerBgCss[b]),o=b):void 0},g=function(a){var b,c,d,e;b=C.settings.activeItemClass,e=[];for(c in A)d=A[c],c=parseInt(c),c===a?(d.object.addClass(b),e.push(J(a))):e.push(d.object.removeClass(b));return e},r=function(a,b,c){var d;return null==c&&(c=!1),d=void 0,function(){var e,f,g,h;return g=this,e=arguments,h=function(){return d=null,c?void 0:a.apply(g,e)},f=c&&!d,clearTimeout(d),d=setTimeout(h,b),f?a.apply(g,e):void 0}},z()}}(jQuery)}.call(this),function(){var a,b,c,d,e,f,g,h,i;i={cssAnimationTime:550,wrapper_css:"cube-wrapper",parent_container:$(".cubes"),parent_rotated:"rotated",defaultStage:"front"},c=["first","second","third"],d="front",a=$("."+i.wrapper_css),g=function(){var a;return a=$(window).width()/6,$(".cube-side.left").css({transform:"rotateY(90deg) translateZ("+a+"px)"}),$(".cube-side.front").css({transform:"translateZ("+a+"px)"}),$(".cube-side.right").css({transform:"rotateY(-90deg) translateZ("+a+"px)"}),$(".cube-side.back").css({transform:"rotateY(180deg) translateZ("+a+"px)"})},g(),$(".cube-open").on("click",function(){return f($(this).closest("."+i.wrapper_css))}),$(".cube-close").on("click",function(){return f($(this).closest("."+i.wrapper_css))}),f=function(a){var b,d,f,g;for(d=!1,f=0,g=c.length;g>f;f++)b=c[f],d||(d=e(a,b));return h()},e=function(a,b){return d!==i.defaultStage?(d=i.defaultStage,!0):a.hasClass(b)?(d=b,!0):!1},b=function(a,b){return setTimeout(function(){return a()},b)},h=function(){var a,e,f,g,h,j,k;for(g=[function(){return $(".scale").each(function(){return $(this).addClass("on")})},function(){return $(".cube").each(function(){var a,b,e,f;for(d!==i.defaultStage?i.parent_container.addClass(i.parent_rotated):i.parent_container.removeClass(i.parent_rotated),f=[],b=0,e=c.length;e>b;b++)a=c[b],f.push(a!==d?$(this).removeClass(a):$(this).addClass(a));return f})},function(){return $(".scale").each(function(){return $(this).removeClass("on")})}],a=0,k=[],e=h=0,j=g.length;j>h;e=++h)f=g[e],k.push(b(f,i.cssAnimationTime*e));return k}}.call(this),function(){$(document).ready(function(){var a;return a={wrapper:$(".hover-photo-wrap"),first_item:$(".individual-therapy"),second_item:$(".group-therapy"),left_css:"move-left",right_css:"move-right"},a.first_item.mouseenter(function(){return a.wrapper.addClass(a.left_css)}),a.first_item.mouseleave(function(){return a.wrapper.removeClass(a.left_css)}),a.second_item.mouseenter(function(){return a.wrapper.addClass(a.right_css)}),a.second_item.mouseleave(function(){return a.wrapper.removeClass(a.right_css)})})}.call(this),function(){var a,b;b=function(a,b){var c;return null==b&&(b=1),c=$(window).height(),a.each(function(a,d){return $(d).height(c*b)})},$(document).ready(function(){return a(),$(window).resize(function(){return a()})}),a=function(){var a;return Modernizr.mq("only all and (max-width: 767px)")?(a=$(window).width()<$(window).height()?.5:1,b($(".bg-image"),a)):(b($(".item-column")),$(".parallax-container").horizontalParallax())}}.call(this);
